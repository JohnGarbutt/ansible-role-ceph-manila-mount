---
- name: Install glusterfs packages for mount and unmount
  yum: name=epel-release,glusterfs-client,glusterfs-rdma,glusterfs-fuse
  when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"

- lineinfile:
    path: /etc/hosts
    line: '10.60.253.38 orange-data-0.novalocal orange-data-0'
    owner: root
    group: root
    mode: 0644

- lineinfile:
    path: /etc/hosts
    line: '10.60.253.43 orange-data-1.novalocal orange-data-1'
    owner: root
    group: root
    mode: 0644

- name: Ensure mount directory exists
  file:
    path: /root/mnt
    state: directory
    mode: 0755

- name: Mount Glusterfs
  mount:
    path: /root/mnt
    src: "{{glusterfs_host}}:{{glusterfs_path}}"
    fstype: glusterfs
    state: mounted

